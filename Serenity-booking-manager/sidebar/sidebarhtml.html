<html>
    <head>
        <script
            src="https://code.jquery.com/jquery-3.4.1.min.js"
            integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo="
            crossorigin="anonymous"></script>
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <link href="https://fonts.googleapis.com/css?family=Open+Sans&display=swap" rel="stylesheet">
        <!-- sweetalert import -->
        <script src="https://unpkg.com/sweetalert/dist/sweetalert.min.js"></script>
        <script src="https://cdn.jsdelivr.net/gh/catmandx/hhoang-gas-tools@1.1/Serenity-booking-manager/sidebar/sidebarjs.min.js"></script>
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/catmandx/hhoang-gas-tools@1.1/Serenity-booking-manager/sidebar/sidebarcss.min.css">
    </head>
    <body>
        <div class="loading-screen" style="width: 100%; height: 100%;" id="loading-screen">
            <div class="loader-container">
                <div class="loader"></div>
            </div>
        </div>
        
        <? if(editing) {?>
        <div style="text-align: center;">
            <button class="button editButton" id="chooseButton" onclick="chooseCustomerToEdit()" style="background: #673ab7;">Sửa khách đang chọn</button>
            <input type="hidden" id="currentPosition">
        </div>
        <?}?>
        
        <form class="container">
            <div class="input-block-wrapper">
                <div class="label">Ngày</div>
                <div id="dateError" class="error-message">test error</div>
                <div class="input-wrapper" id="dateInput">
                    <input type="date" name="date" id="date" oninput="change()" value="<?!=Utilities.formatDate(new Date(), 'GMT', 'yyyy-MM-dd')?>">
                </div>
            </div>
            <div class="input-block-wrapper">
                <div class="label">Phòng</div>
                <div id="roomError" class="error-message"></div>
                <div class="input-wrapper">
                    <select id="room" name="room" oninput="change()" onclick="change()">
                        <?!= getRooms() ?>
                    </select>
                </div>
            </div>
            <div class="input-block-wrapper">
                <div class="label">Số khách</div>
                <div id="customerQuantityError" class="error-message"></div>
                <div class="input-wrapper">
                    <input type="number" placeholder="Số khách" name="customerQuantity" id="customerQuantity" min="0" max="20" onblur="validate('#customerQuantity')">
                </div>
            </div>
            <div class="input-block-wrapper">
                <div class="label">Tên khách</div>
                <div id="customerNameError" class="error-message"></div>
                <div class="input-wrapper">
                    <input type="text" placeholder="Tên khách" name="customerName" id="customerName" onblur="validate('#customerName', '#agent')">
                </div>
            </div>
            <div class="input-block-wrapper">
                <div class="label">Đại lý</div>
                <div id="agentError" class="error-message"></div>
                <div class="input-wrapper">
                    <input type="text" placeholder="Đại lý" name="agent" id="agent" onblur="validate('#customerName', '#agent')">
                </div>
            </div>
            <div class="input-block-wrapper">
                <div class="label">Người book</div>
                <div id="referrerError" class="error-message"></div>
                <div class="input-wrapper">
                    <input type="text" placeholder="Ai đó" name="referrer" id="referrer" onblur="">
                </div>
            </div>
            <div class="input-block-wrapper">
                <div class="label">Điểm đón</div>
                <div id="pickupError" class="error-message"></div>
                <div class="input-wrapper">
                    <input type="text" placeholder="18 Hồ Tùng Mậu...." name="pickup" id="pickup">
                </div>
            </div>

            <div class="input-block-wrapper">
                <div class="label">Kiêng chay</div>
                <div id="dietError" class="error-message"></div>
                <div class="input-wrapper">
                    <input type="text" placeholder="Chỉ ăn chay, ăn được thịt, v.v" name="diet" id="diet">
                </div>
            </div>

            <div class="input-block-wrapper">
                <div class="label">Thanh toán</div>
                <div id="paymentError" class="error-message"></div>
                <div class="input-wrapper">
                    <select id="payment" name="payment">
                        <option value="empty"></option>
                        <option value="notPaid">Chưa thanh toán</option>
                        <option value="paid">Đã thanh toán</option>
                        <option value="congNo">Để công nợ cuối tháng</option>
                        <option value="datCoc">Đã đặt cọc, checkin thu nốt</option>
                    </select>
                </div>
                <div id = "checkboxCC">
                    <span style="font-size: small;">Có thẻ?</span>
                    <input type="checkbox" id="trigger" name="question">
                </div>
                <div class="input-block-wrapper" id="creditcard">
                    <div id="ccTypeError" class="error-message"></div>
                    <div class="input-wrapper">
                        <input type="text" name="ccType" id="ccType" placeholder="Loại thẻ: VISA, Mastercard, ..." list="commontypes" onfocus="$('#ccType').removeClass('error')">
                        <datalist id="commontypes">
                            <option value="VISA">VISA</option>
                            <option value="Mastercard">Mastercard</option>
                        </datalist>
                    </div>
                    <div id="ccNumberError" class="error-message"></div>
                    <div class="input-wrapper">
                        <input type="text" name="ccNumber" id="ccNumber" placeholder="Số thẻ" onfocus="$('#ccNumber').removeClass('error')">
                    </div>
                    <div id="ccOwnerError" class="error-message"></div>
                    <div class="input-wrapper">
                        <input type="text" name="ccOwner" id="ccOwner" placeholder="Chủ thẻ" onfocus="$('#ccOwner').removeClass('error')">
                    </div>
                    <div id="ccExpiryError" class="error-message"></div>
                    <div class="input-wrapper">
                        <input type="text" name="ccExpiry" id="ccExpiry" placeholder="MM/YY" maxlength="7" onfocus="$('#ccExpiry').removeClass('error')">
                    </div>
                    <div id="ccCVCError" class="error-message"></div>
                    <div class="input-wrapper">
                        <input type="text" name="ccCVC" id="ccCVC" placeholder="CVC" maxlength="4" onfocus="$('#ccCVC').removeClass('error')">
                    </div>
                </div>
            </div>
            <section id='laterpart'>
                <div class="input-block-wrapper">
                    <div class="label">Ghi chú khác</div>
                    <div class="input-wrapper">
                        <textarea rows = "7" cols = "60" name = "note" id="note" style="resize: none;"></textarea><br>
                    </div>
                </div>

                <div class="input-block-wrapper">
                    <button id="cancelButton" type="reset" onclick="$('#creditcard').hide();"><span>Cancel</span></button>
                    <? if(editing) {?>
                    <button id="updateButton" type="button" class="editButton" onclick="updateCustomer($('#currentPosition').val())">Cập nhật</button>
                    <?}else{?>
                    <button id="doneButton" type="button">Done</button>
                    <?}?>
                </div>
            </section>
        </form>
    </body>
</html>